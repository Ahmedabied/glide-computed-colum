"use strict";(()=>{function h(e){return e instanceof Date?e.toISOString():Array.isArray(e)?e.map(h):e}async function x(e,t){let{data:{key:r,params:n}}=e,s,i;try{s=await t(...n)}catch(a){s=void 0;try{i=a.toString()}catch{i="Exception can't be stringified."}}let o={key:r};s!==void 0&&(s=h(s),o.result={type:"string",value:s}),i!==void 0&&(o.error=i),(e.source?.postMessage)(o,"*")}function C(e){return typeof window<"u"&&window.addEventListener("message",t=>x(t,e.run)),{...e,json:JSON.stringify(I(e),null,2)}}var b=`
        <svg
          width="48"
          height="48"
          viewBox="0 0 26 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0 14.85L14.3 0V7.29C14.3 11.4653 11.0406 14.85 7.02 14.85H0Z"
            fill="currentColor"
          />
          <path
            d="M11.7 19.71C11.7 15.5347 14.9594 12.15 18.98 12.15H26L11.7 27V19.71Z"
            fill="currentColor"
          />
        </svg>
    `,S=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.0002 34.828L2.58624 25.414C1.80524 24.633 1.80524 23.367 2.58624 22.586L12.0002 13.172L14.8292 16L6.82924 24L14.8292 32L12.0002 34.828Z" fill="currentColor"/>
<path d="M36.0004 34.828L33.1714 32L41.1714 24L33.1714 16L36.0004 13.172L45.4144 22.586C46.1954 23.367 46.1954 24.633 45.4144 25.414L36.0004 34.828Z" fill="currentColor"/>
<path d="M26.5485 5.57617L17.5723 41.4553L21.4527 42.4261L30.4289 6.54697L26.5485 5.57617Z" fill="currentColor"/>
</svg>`;function I(e){let{name:t,description:r,author:n,result:s,params:i,about:o,video:a}=e,{icon:l=S}=e;return l==="glide"&&(l=b),{name:t,description:r,author:n,result:s,about:o,icon:l,video:a,params:Object.entries(i).map(([u,c])=>({name:u,...c}))}}var y={timeoutSeconds:3600};function w(e){return(new Date().getTime()-e.getTime())/1e3}var g=class{constructor(t=y){this.cache=new Map;this.props={...t,...y}}async get(t){let{timestamp:r,item:n}=this.cache.get(t)??{timestamp:new Date(0)};if(w(r)<this.props.timeoutSeconds)return n;this.cache.delete(t)}async getWith(t,r){let{timestamp:n,item:s}=this.cache.get(t)??{timestamp:new Date(0)};if(w(n)<this.props.timeoutSeconds)return s;{let i=await r(t);return this.set(t,i),i}}set(t,r){return this.cache.set(t,{timestamp:new Date,item:r})}async fetch(t,r=t){return await this.getWith(r,()=>fetch(t).then(n=>n.json()))}};var L=new g,v="https://corsproxy.io/?",f={"\u0634 \u0645 \u0645":"LLC",\u0634_\u0645_\u0645:"LLC","\u0634.\u0645.\u0645":"LLC","\u0630 \u0645 \u0645":"LLC",\u0630_\u0645_\u0645:"LLC","\u0630.\u0645.\u0645":"LLC",\u0645\u0633\u0627\u0647\u0645\u0629:"Joint Stock",\u0645\u062D\u062F\u0648\u062F\u0629:"Limited",\u0644\u0644\u062A\u062C\u0627\u0631\u0629:"Trading",\u0644\u0644\u0627\u0633\u062A\u062B\u0645\u0627\u0631:"Investment",\u0644\u0644\u0645\u0642\u0627\u0648\u0644\u0627\u062A:"Contracting",\u0644\u0644\u062E\u062F\u0645\u0627\u062A:"Services",\u0644\u0644\u0635\u0646\u0627\u0639\u0629:"Industrial",\u0644\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F:"Import",\u0644\u0644\u062A\u0635\u062F\u064A\u0631:"Export",\u0648\u0627\u0644\u062A\u0648\u0632\u064A\u0639:"and Distribution",\u0627\u0644\u0642\u0627\u0628\u0636\u0629:"Holding",\u0627\u0644\u0634\u0631\u0643\u0629:"The Company",\u0634\u0631\u0643\u0629:"Company",\u0645\u062C\u0645\u0648\u0639\u0629:"Group",\u0648\u0634\u0631\u0643\u0627\u0647:"& Partners",\u0648\u0634\u0631\u0643\u0627\u0626\u0647\u0645:"& Partners",\u0648\u0634\u0631\u064A\u0643\u062A\u0629:"& Co.",\u0648\u0634\u0631\u064A\u0643\u062A\u0647:"& Co."};function U(e){return/[\u0600-\u06FF]/.test(e)}function T(e){return e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}async function D(e,t){let r=e;r=r.replace(/ش\s+م\s+م/g,"\u0634_\u0645_\u0645").replace(/ذ\s+م\s+م/g,"\u0630_\u0645_\u0645");let n=r.split(/\s+/),s=new Array(n.length).fill(null),i=[];for(let o=0;o<n.length;o++){let a=n[o],l=f[a];if(!l){let u=a.replace(/ة$/,"\u0647");l=f[u]}if(!l&&a.startsWith("\u0648")&&a.length>3){let u=a.substring(1),c=f[u]||f[u.replace(/ة$/,"\u0647")];c&&(l="and "+c)}l?s[o]=l:i.push({index:o,word:a})}if(i.length>0){let o=i.map(u=>u.word).join(" "),a=`https://transliterate.qcri.org/ar2en/${encodeURIComponent(o)}`,l=typeof window<"u"?v+encodeURIComponent(a):a;try{let c=(await t(l)).results||o,R=c.split(" "),P=c,p=0,d=P.split(/\s+/);for(let m=0;m<i.length;m++)p<d.length&&(s[i[m].index]=T(d[p]),p++);for(;p<d.length;){let m=i[i.length-1].index;s[m]+=" "+T(d[p]),p++}}catch{i.forEach(c=>{s[c.index]=c.word})}}return s.filter(o=>o!==null&&o!=="").join(" ")}var A=C({name:"Name Transliterator",description:"Transliterates names between Arabic and English scripts.",author:"Glide User",params:{language:{displayName:"Target Language",type:"string"},name:{displayName:"Name",type:"string"}},result:{type:"string"},async run(e,t){if(e.value===void 0||t.value===void 0)return;let r=e.value.toLowerCase().trim(),n=t.value.trim();if(!n)return"";if(r!=="en"&&r!=="ar")return n;let s=U(n);if(r==="en"&&!s||r==="ar"&&s)return n;if(r==="en"&&s)return await D(n,a=>L.fetch(a));let i=r==="en"?`https://transliterate.qcri.org/ar2en/${encodeURIComponent(n)}`:`https://transliterate.qcri.org/en2ar/${encodeURIComponent(n)}`,o=typeof window<"u"?v+encodeURIComponent(i):i;try{return(await L.fetch(o)).results??n}catch{return n}}});})();
//# sourceMappingURL=index.js.map
